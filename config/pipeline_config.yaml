# Pipeline Configuration for AWS Deployment
environment: development  # development, staging, production

# AWS Configuration
aws:
  region: us-east-1
  s3:
    bucket_name: corporate-data-pipeline  # Change to your bucket name
    source1_prefix: data/source1/
    source2_prefix: data/source2/
    iceberg_warehouse: s3://corporate-data-pipeline/iceberg-warehouse/
    mlflow_artifacts: s3://corporate-data-pipeline/mlflow-artifacts/
  
  glue:
    catalog_name: glue_catalog
    database_name: corporate_db
    table_name: corporate_registry
  
  emr:
    cluster_name: data-ai-pipeline-cluster
    log_uri: s3://corporate-data-pipeline/emr-logs/
    release_label: emr-6.15.0
    instance_type: m5.xlarge
    instance_count: 3

# Data Ingestion Configuration
ingestion:
  source1:
    name: supply_chain_data
    schema:
      - corporate_name_s1
      - address
      - activity_places
      - top_suppliers
  
  source2:
    name: financial_data
    schema:
      - corporate_name_s2
      - main_customers
      - revenue
      - profit

# Entity Resolution Configuration
entity_resolution:
  matching_threshold: 0.85  # Fuzzy matching threshold (0-1)
  blocking_keys:
    - normalized_name
    - city
  algorithms:
    - levenshtein
    - jaro_winkler
  
# Iceberg Table Configuration
iceberg:
  table_name: corporate_registry
  partition_by:
    - registration_date
  sort_by:
    - corporate_id
  properties:
    write.format.default: parquet
    write.parquet.compression-codec: snappy
    commit.retry.num-retries: 3

# ML Configuration
ml:
  model_name: corporate_profit_predictor
  target_column: high_profit
  profit_threshold: 1000000  # $1M threshold for classification
  features:
    - revenue
    - supplier_count
    - customer_count
  
  training:
    test_size: 0.2
    random_state: 42
    algorithm: logistic_regression
    max_iter: 100
  
  mlflow:
    experiment_name: corporate_profit_prediction
    tracking_uri: http://localhost:5000  # Update for production
    registry_uri: s3://corporate-data-pipeline/mlflow-registry/

# Orchestration Configuration
orchestration:
  schedule: "0 2 * * *"  # Daily at 2 AM UTC
  retry_attempts: 3
  retry_delay_minutes: 5

# Logging Configuration
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  log_path: logs/pipeline.log
